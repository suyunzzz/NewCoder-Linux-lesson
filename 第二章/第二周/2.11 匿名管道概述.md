# 匿名管道概述

​	

管道也叫无名（匿名）管道，是Unix系统IPC的最古老形式，所有的UNIX系统都支持这种通信机制。

## 管道的特点

**管道其实是一个在内核内存中维护的缓冲器**，这个缓冲器的存储能力是有限的，不同的操作系统大小不一定相同。

**管道拥有文件的特质**：读操作、写操作，匿名管道没有文件实体，有名管道有文件实体但不存储数据。可以按照操作文件的方式对管道进行操作。

一个管道就是一个字节流，不存在消息或者消息边界的概念，**从管道读取数据的进程可以读取任意大小的数据块**，而不管写入进程写入管道的数据块的大小是多少。

通过管道传递的数据是顺序的，**从管道中读取出来的字节的顺序和它们被写入管道的顺序是完全一样的**。

![image-20210109201955176](https://gitee.com/suyunzzz/img/raw/master/img/20210109201955.png)

在管道中数据的传递是单向的，管道是半双工的

从管道读数据是一次性操作，数据一旦被读走，它就从管道中被抛弃，释放空间以便写更多的数据，在管道中无法使用lseek()来随机访问数据

匿名管道只能在具有公共祖先的进程（父进程与子进程，或者两个兄弟进程，具有亲缘关系）之间使用。

![image-20210109202629686](https://gitee.com/suyunzzz/img/raw/master/img/20210109202629.png)

## 管道为什么能够实现进程间通信？

因为fork()函数创建的进程之间共享文件描述符表

![image-20210109203031057](https://gitee.com/suyunzzz/img/raw/master/img/20210109203031.png)

![image-20210109212516087](https://gitee.com/suyunzzz/img/raw/master/img/20210109212516.png)