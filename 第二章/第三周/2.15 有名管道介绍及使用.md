# 有名管道介绍及使用

> 匿名管道无文件实体
>
> 有名管道有文件实体

> 无论是匿名管道还是有名管道，操作的都是内核中的缓冲区



通过有名管道（FIFO），**不相关的进程也能进行通信**

1. FO在文件系统中作为一个特殊文件使用，但FIFO中的内容存放在内存中。

2. 当使用FIFO的进程退出后，FIFO文件将继续保存在文件系统中以便以后使用

3. FIFO有名字，不相关的进程可以通过打开有名管道进行通信



```cpp
    有名管道的注意事项：
        1.一个为只读而打开一个管道的进程会阻塞，直到另外一个进程为只写打开管道
        2.一个为只写而打开一个管道的进程会阻塞，直到另外一个进程为只读打开管道

    读管道：
        管道中有数据，read返回实际读到的字节数
        管道中无数据：
            管道写端被全部关闭，read返回0，（相当于读到文件末尾）
            写端没有全部被关闭，read阻塞等待
    
    写管道：
        管道读端被全部关闭，进行异常终止（收到一个SIGPIPE信号）
        管道读端没有全部关闭：
            管道已经满了，write会阻塞
            管道没有满，write将数据写入，并返回实际写入的字节数。
```

![image-20210115213615693](https://gitee.com/suyunzzz/img/raw/master/img/20210115213615.png)

![image-20210115213625997](https://gitee.com/suyunzzz/img/raw/master/img/20210115213626.png)

![image-20210115213633451](https://gitee.com/suyunzzz/img/raw/master/img/20210115213633.png)